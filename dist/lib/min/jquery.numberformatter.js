!function(r){function t(r,t,e){this.dec=r,this.group=t,this.neg=e}function e(){for(var r=0;r<h.length;r++){localeGroup=h[r];for(var t=0;t<localeGroup.length;t++)a.put(localeGroup[t],r)}}function n(r){0==a.size()&&e();var n=".",f=",",i=a.get(r);if(i){var o=l[i];o&&(n=o[0],f=o[1])}return new t(n,f,"-")}var a=new Hashtable,f=["ae","au","ca","cn","eg","gb","hk","il","in","jp","sk","th","tw","us"],i=["at","br","de","dk","es","gr","it","nl","pt","tr","vn"],o=["cz","fi","fr","ru","se","pl"],u=["ch"],l=[[".",","],[",","."],[","," "],[".","'"]],h=[f,i,o,u];r.fn.formatNumber=function(t,e,n){return this.each(function(){null==e&&(e=!0),null==n&&(n=!0);var a;a=r(this).is(":input")?new String(r(this).val()):new String(r(this).text());var f=r.formatNumber(a,t);if(e&&(r(this).is(":input")?r(this).val(f):r(this).text(f)),n)return f})},r.formatNumber=function(t,e){for(var e=r.extend({},r.fn.formatNumber.defaults,e),n="0#-,.",a="",f=!1,i=0;i<e.format.length;i++){if(-1!=n.indexOf(e.format.charAt(i))){if(0==i&&"-"==e.format.charAt(i)){f=!0;continue}break}a+=e.format.charAt(i)}for(var o="",i=e.format.length-1;i>=0&&-1==n.indexOf(e.format.charAt(i));i--)o=e.format.charAt(i)+o;e.format=e.format.substring(a.length),e.format=e.format.substring(0,e.format.length-o.length);var u=new Number(t);return r._formatNumber(u,e,o,a,f)},r._formatNumber=function(t,e,a,f,i){var e=r.extend({},r.fn.formatNumber.defaults,e),o=n(e.locale.toLowerCase()),u=o.dec,l=o.group,h=o.neg,s=!1;if(isNaN(t)){if(!0!==e.nanForceZero)return null;t=0,s=!0}"%"==a&&(t*=100);var c="";if(e.format.indexOf(".")>-1){var g=u,m=e.format.substring(e.format.lastIndexOf(".")+1);if(!0===e.round)t=new Number(t.toFixed(m.length));else{var d=t.toString();d=d.substring(0,d.lastIndexOf(".")+m.length+1),t=new Number(d)}var v=t%1,b=new String(v.toFixed(m.length));b=b.substring(b.lastIndexOf(".")+1);for(var p=0;p<m.length;p++)if("#"!=m.charAt(p)||"0"==b.charAt(p)){if("#"==m.charAt(p)&&"0"==b.charAt(p)){var x=b.substring(p);if(x.match("[1-9]")){g+=b.charAt(p);continue}break}"0"==m.charAt(p)&&(g+=b.charAt(p))}else g+=b.charAt(p);c+=g}else t=Math.round(t);var w=Math.floor(t);t<0&&(w=Math.ceil(t));var N="";N=-1==e.format.indexOf(".")?e.format:e.format.substring(0,e.format.indexOf("."));var A="";if(0!=w||"#"!=N.substr(N.length-1)||s){var O=new String(Math.abs(w)),S=9999;-1!=N.lastIndexOf(",")&&(S=N.length-N.lastIndexOf(",")-1);for(var F=0,p=O.length-1;p>-1;p--)A=O.charAt(p)+A,++F==S&&0!=p&&(A=l+A,F=0);if(N.length>A.length){var I=N.indexOf("0");if(-1!=I)for(var M=N.length-I;A.length<M;)A="0"+A}}return A||-1===N.indexOf("0",N.length-1)||(A="0"),c=A+c,t<0&&i&&f.length>0?f=h+f:t<0&&(c=h+c),e.decimalSeparatorAlwaysShown||c.lastIndexOf(u)==c.length-1&&(c=c.substring(0,c.length-1)),c=f+c+a},r.fn.parseNumber=function(t,e,n){null==e&&(e=!0),null==n&&(n=!0);var a;a=r(this).is(":input")?new String(r(this).val()):new String(r(this).text());var f=r.parseNumber(a,t);if(f&&(e&&(r(this).is(":input")?r(this).val(f.toString()):r(this).text(f.toString())),n))return f},r.parseNumber=function(t,e){for(var e=r.extend({},r.fn.parseNumber.defaults,e),a=n(e.locale.toLowerCase()),f=a.dec,i=a.group,o=a.neg,u="1234567890.-";t.indexOf(i)>-1;)t=t.replace(i,"");t=t.replace(f,".").replace(o,"-");var l="",h=!1;"%"==t.charAt(t.length-1)&&(h=!0);for(var s=0;s<t.length;s++)u.indexOf(t.charAt(s))>-1&&(l+=t.charAt(s));var c=new Number(l);return h&&(c/=100,c=c.toFixed(l.length-1)),c},r.fn.parseNumber.defaults={locale:"us",decimalSeparatorAlwaysShown:!1},r.fn.formatNumber.defaults={format:"#,###.00",locale:"us",decimalSeparatorAlwaysShown:!1,nanForceZero:!0,round:!0},Number.prototype.toFixed=function(r){return $._roundNumber(this,r)},r._roundNumber=function(r,t){var e=Math.pow(10,t||0),n=String(Math.round(r*e)/e);if(t>0){var a=n.indexOf(".");for(-1==a?(n+=".",a=0):a=n.length-(a+1);a<t;)n+="0",a++}return n}}(jQuery);