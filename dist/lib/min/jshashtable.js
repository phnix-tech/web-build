!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd&&define(n),t.Hashtable=n()}(this,function(t){function n(t){return typeof t==p?t:""+t}function e(t){var r;return typeof t==p?t:typeof t.hashCode==y?(r=t.hashCode(),typeof r==p?r:e(r)):n(t)}function r(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])}function i(t,n){return t.equals(n)}function o(t,n){return typeof n.equals==y?n.equals(t):t===n}function u(n){return function(e){if(null===e)throw new Error("null is not a valid "+n);if(e===t)throw new Error(n+" must not be undefined")}}function s(t,n,e,r){this[0]=t,this.entries=[],this.addEntry(n,e),null!==r&&(this.getEqualityFunction=function(){return r})}function f(t){return function(n){for(var e,r=this.entries.length,i=this.getEqualityFunction(n);r--;)if(e=this.entries[r],i(n,e[0]))switch(t){case d:return!0;case E:return e;case K:return[r,e[1]]}return!1}}function l(t){return function(n){for(var e=n.length,r=0,i=this.entries,o=i.length;r<o;++r)n[e+r]=i[r][t]}}function a(t,n){for(var e,r=t.length;r--;)if(e=t[r],n===e[0])return r;return null}function h(t,n){var e=t[n];return e&&e instanceof s?e:null}function c(){var n=[],i={},o={replaceDuplicateKey:!0,hashCode:e,equals:null},u=arguments[0],f=arguments[1];f!==t?(o.hashCode=u,o.equals=f):u!==t&&r(o,u);var l=o.hashCode,c=o.equals;this.properties=o,this.put=function(t,e){v(t),g(e);var r,u,f=l(t),a=null;return r=h(i,f),r?(u=r.getEntryForKey(t),u?(o.replaceDuplicateKey&&(u[0]=t),a=u[1],u[1]=e):r.addEntry(t,e)):(r=new s(f,t,e,c),n.push(r),i[f]=r),a},this.get=function(t){v(t);var n=l(t),e=h(i,n);if(e){var r=e.getEntryForKey(t);if(r)return r[1]}return null},this.containsKey=function(t){v(t);var n=l(t),e=h(i,n);return!!e&&e.containsKey(t)},this.containsValue=function(t){g(t);for(var e=n.length;e--;)if(n[e].containsValue(t))return!0;return!1},this.clear=function(){n.length=0,i={}},this.isEmpty=function(){return!n.length};var y=function(t){return function(){for(var e=[],r=n.length;r--;)n[r][t](e);return e}};this.keys=y("keys"),this.values=y("values"),this.entries=y("getEntries"),this.remove=function(t){v(t);var e,r=l(t),o=null,u=h(i,r);return u&&null!==(o=u.removeEntryForKey(t))&&0==u.entries.length&&(e=a(n,r),n.splice(e,1),delete i[r]),o},this.size=function(){for(var t=0,e=n.length;e--;)t+=n[e].entries.length;return t}}var y="function",p="string";if("undefined"==typeof encodeURIComponent||Array.prototype.splice===t||Object.prototype.hasOwnProperty===t)return null;var v=u("key"),g=u("value"),d=0,E=1,K=2;return s.prototype={getEqualityFunction:function(t){return typeof t.equals==y?i:o},getEntryForKey:f(E),getEntryAndIndexForKey:f(K),removeEntryForKey:function(t){var n=this.getEntryAndIndexForKey(t);return n?(this.entries.splice(n[0],1),n[1]):null},addEntry:function(t,n){this.entries.push([t,n])},keys:l(0),values:l(1),getEntries:function(t){for(var n=t.length,e=0,r=this.entries,i=r.length;e<i;++e)t[n+e]=r[e].slice(0)},containsKey:f(d),containsValue:function(t){for(var n=this.entries,e=n.length;e--;)if(t===n[e][1])return!0;return!1}},c.prototype={each:function(t){for(var n,e=this.entries(),r=e.length;r--;)n=e[r],t(n[0],n[1])},equals:function(t){var n,e,r,i=this.size();if(i==t.size()){for(n=this.keys();i--;)if(e=n[i],null===(r=t.get(e))||r!==this.get(e))return!1;return!0}return!1},putAll:function(t,n){for(var e,r,i,o,u=t.entries(),s=u.length,f=typeof n==y;s--;)e=u[s],r=e[0],i=e[1],f&&(o=this.get(r))&&(i=n(r,o,i)),this.put(r,i)},clone:function(){var t=new c(this.properties);return t.putAll(this),t}},c.prototype.toQueryString=function(){for(var t,e=this.entries(),r=e.length,i=[];r--;)t=e[r],i[r]=encodeURIComponent(n(t[0]))+"="+encodeURIComponent(n(t[1]));return i.join("&")},c});