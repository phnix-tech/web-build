"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var o="object"===("undefined"==typeof self?"undefined":_typeof(self))&&self.self===self&&self||"object"===("undefined"==typeof global?"undefined":_typeof(global))&&global.global===global&&global||this||{};o.GSMJsBridge=e()}}(function(){function isiOS(e){return e=e||navigator.userAgent,/ip(hone|od|ad)/i.test(e)}function isAndroid(e){return e=e||navigator.userAgent,/(android|bb\d+|meego).+mobile|Android/i.test(e)}function isWPhone(e){return e=e||navigator.userAgent,/windows phone/i.test(e)}function getMobileOs(){return isWPhone()?MobileOsEnum.WPhone:isAndroid()?MobileOsEnum.Android:isiOS()&&!window.MSStream?MobileOsEnum.iOS:MobileOsEnum.Others}function log(){DEBUG&&console.log.call(console,Array.prototype.join.call(arguments," "))}function invoke(e){log("invoke",e);var o=getMobileOs();o===MobileOsEnum.Android||o===MobileOsEnum.iOS?prompt(e,"gsmClient://bridge/"):log("unknown platform")}function callByJS(e){log("callByJS",JSON.stringify(e));var o={};o.module=e.module,o.action=e.action,o.token=++guid,o.param=e.param||{},callbacks[o.token]={success:e.success,error:e.error},invoke(JSON.stringify(o))}function callByNative(){var opt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};log("callByNative",JSON.stringify(opt));var script=opt.script||"";if(script){log("callByNative script",script);try{eval(script)}catch(e){console.error(e)}}else{var successCallback=callbacks[opt.token].success,errorCallback=callbacks[opt.token].error,isArgList=!("arglist"in opt)||opt.arglist,success=opt.success,args=opt.ret,isAry=function(e){return"[object Array]"===Object.prototype.toString.call(e)};isArgList&&(opt.hasOwnProperty("ret")&&!isAry(args)&&(args=[args]),isAry(args)||(args=[])),success&&"function"==typeof successCallback?(log("successCallback",args),isArgList?successCallback.apply(null,args):successCallback(args)):success||"function"!=typeof errorCallback||(log("errorCallback",args),isArgList?errorCallback.apply(null,args):errorCallback(args));try{delete callbacks[opt.token],log("delete callback")}catch(e){console.error(e)}}}var MobileOsEnum={Android:0,iOS:1,WPhone:2,Others:3},callbacks={},guid=0,DEBUG=!0;return"undefined"!=typeof window&&window&&(window.HybridBridge={callByNative:callByNative},window.__log=log),{callByJS:callByJS,debug:function(e){return 0===arguments.length?DEBUG:("boolean"==typeof e&&(DEBUG=e),this)}}});